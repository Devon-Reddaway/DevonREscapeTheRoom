<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>EscapeTheRoom</title>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <!--Installing A-Frame-->
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>

  <script src="script.js"></script>
  <!--Script needed to create the navmesh in the inspector-->

  <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js" crossorigin="anonymous"></script>

  <!-- A-frame extras-->
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

  <script src="https://rawgit.com/donmccurdy/aframe-extras/v2.1.1/dist/aframe-extras.loaders.min.js"></script>
  
</head>

<body>
  <a-scene cursor="rayOrigin: mouse;" physics="gravity: -9.8; restitution: 0.1" inspector-plugin-recast>
  
    <a-gltf-model src="navmesh2.gltf" position="5 -0.1 0" 
      nav-mesh visible="false"></a-gltf-model> 
   
    <a-light id="amb" type="ambient" intensity="1"></a-light>

    <a-light id="dir" type="directional" position="-13.51676 8.10764 -5.62595" color="white" light="castShadow: true"></a-light>

   

    <a-plane id="floor" shadow="recieve: true;" src="images/DarkWood.jpg" rotation="-90 0 0" scale="14.15 15 10" position="-7.25 -0.01 0" material="" geometry=""></a-plane>

    <a-plane id="ceiling" src="images/DarkWood.jpg" rotation="90 0 0" scale="28.3 28.5 20" position="-0.1 8 0" material="" geometry=""></a-plane>


    
    <a-gltf-model id="bookcase" position="-0.48 3.9 2.9" src="Models/bookshelf.glb" scale="4 4 1.5" rotation="180 90 180" gltf-model="Models/bookshelf.glb"
      animation__5="
      property: position;
      from: -0.48 3.9 2.9;
      to: -0.48 13 2.9;
      dur: 10000;
      easing: linear;
      startEvents: animationcomplete__2;"
      ></a-gltf-model>

    <a-gltf-model id="desk" position="-7 0 -2.5" src="Models/antique_wooden_desk.glb" scale="3 3 3" rotation="0 90 0" gltf-model="Models/antique_wooden_desk.glb"></a-gltf-model>
    
    <a-plane id="backWallTop" position="-7.3 5.25 -7.2" src="images/TatteredWallpaper.jfif" scale="14.15 6 1" material="" geometry=""></a-plane>

    <a-plane id="backWallBot" position="-7.3 1 -7.2" src="images/DarkWood.jpg" scale="14.15 2.5 12" material="" geometry=""></a-plane>

    <a-plane id="leftWallTop" position="-14 5.25 0" rotation="0 90 0" src="images/TatteredWallpaper.jfif" scale="14.3 6 1" material="" geometry=""></a-plane>

    <a-plane id="leftWallBot" position="-14 1 0" rotation="0 90 0" src="images/DarkWood.jpg" scale="14.3 2.5 12" material="" geometry=""></a-plane>

    <a-plane id="rightWallBot" position="-0.25 1 -3.34461" rotation="0 -90 0" src="images/DarkWood.jpg" scale="7.75 2.5 12" material="" geometry=""></a-plane>

    <a-plane id="rightWallBot-2" position="-0.25 1 9" rotation="0 -90 0" src="images/DarkWood.jpg" scale="7.75 2.5 12" material="" geometry=""></a-plane>

    <a-plane id="rightWallTop" position="-0.25 5.25 -3.345" rotation="0 -90 0" src="images/TatteredWallpaper.jfif" scale="7.75 6 1"></a-plane>
    
    <a-plane id="rightWallTop-2" position="-0.25 5.25 9" rotation="0 -90 0" src="images/TatteredWallpaper.jfif" scale="7.75 6 1" material="" geometry=""></a-plane>

    <a-plane id="rightWallTop-3" position="-0.25 9.97555 2.9" rotation="0 -90 0" src="images/TatteredWallpaper.jfif" scale="5.13 6 11.84" material="" geometry=""></a-plane>

    <a-plane id="frontWallTop" position="-7.2 5.25 7.15" rotation="180 0 0" src="images/TatteredWallpaper.jfif" scale="14.15 6 1" material="" geometry=""></a-plane>
    
    <a-plane id="frontWallBot" position="-7.2 1 7.15" rotation="0 180 0" src="images/DarkWood.jpg" scale="14.15 2.5 24"></a-plane>

    <a-box id="brick1" position="-7.7 1.43 7.7" rotation="0 -180 0" src="images/brick.jpg" scale="2.5 2.5 2.5" material="" geometry=""></a-box>

    <a-box id="brick2" position="-7.7 4.2 8.1" rotation="0 -180 0" src="images/brick.jpg" scale="1 3.3 2.5" material="" geometry=""></a-box>

    <a-box id="brick3" position="-7.7 7.5 8.1" rotation="0 -180 0" src="images/brick.jpg" scale="1 3.3 2.5" material="" geometry=""></a-box>
    
    <a-plane id="fire" position="-7.7 1.27437 6.44" rotation="0 -180 0" src="images/fire.jpg" scale="2 2 2" material="" geometry=""></a-plane>
      
    <a-gltf-model id="bookImp1" position="-6.8 2.5 -2.6" src="Models/simple_book.glb" scale="2.2 4 2.2" rotation="0 0 0" gltf-model="Models/simple_book.glb" 
      
      animation__1="property: position; from: -6.8 2.5 -2.6; to: -6.8 4 -2.6; easing: linear; startEvents: click;"

       animation__1.1="property: rotation; from: 0 0 0; to: 90 90 90; easing: linear; startEvents: animationcomplete__1;"

       animation__1.2="property: position; from: -6.8 4 -2.6; to: 1 1 1; easing: linear; dur: 1; startEvents: animationcomplete__1.1;"
      > </a-gltf-model>

    <a-gltf-model id="bookImp2" position="-6.7 2.7 6.7" src="Models/simple_book.glb" scale="2.2 4 2.2" rotation="" gltf-model="Models/simple_book.glb" animation__2="property: position; from: -6.7 2.7 6.7; to: -6.7 4.2 6.7; easing: linear; startEvents: click" animation__2.1="property: rotation; from: 0 0 0; to: 90 90 90; easing: linear; startEvents: animationcomplete__2" animation__2.2="property: position; from: -6.7 4.2 6.7; to: 1 1 1; easing: linear; dur: 1; startEvents: animationcomplete__2.1"> </a-gltf-model>

    <a-gltf-model id="bookImp3" position="-0.5 5 2.5" src="Models/simple_book.glb" scale="2.2 4 2.2" rotation="90 90 90" gltf-model="Models/simple_book.glb" animation__3="property: position; from: -0.5 5 2.5; to: -0.5 6.5 2.5; easing: linear; startEvents: click" animation__3.1="property: rotation; from: 90 90 90; to: 90 270 90; easing: linear; startEvents: animationcomplete__3" animation__3.2="property: position; from: -0.5 6.5 2.5; to: 1 1 1; easing: linear; dur: 1; startEvents: animationcomplete__3.1"> </a-gltf-model>




    <a-gltf-model id="bookFinal" src="Models/hard_book.glb" onclick="changeVisibility()" position="-9 0.1 -4" gltf-model="Models/hard_book.glb"></a-gltf-model>
    

    <a-plane id="oldPainting" src="images/oldPainting.jpg" position="-7.3 5.25 -7.19" scale="4 4 4"></a-plane>

    <a-gltf-model id="hangingLight" position="-10.1 1.4 -6.5" src="Models/hangingLight.glb" scale="2 0.8 2" gltf-model="Models/hangingLight.glb"></a-gltf-model>

    <a-entity id="rig" position="0 0 6" movement-controls="constrainToNavMesh: true; speed: 0.5;">
      
      <a-entity camera id="camera" position="-5 3 0" look-controls="pointerLockEnabled: false" extended-wasd-controls="flyEnabled: true; 
              turnEnabled: true; lookEnabled: true; maxLookAngle: 60;">
        <a-plane id="win" scale="15 7.5 1" src="images/endScreen.jpeg" visible="false" position="0 0 -4"></a-plane>
      </a-entity>
    </a-entity>

  </a-scene>
</body>

</html>

